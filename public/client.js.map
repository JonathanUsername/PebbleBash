{"version":3,"sources":["../client/client.js"],"names":[],"mappings":"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","file":"client.js","sourcesContent":["const LIMIT = 5;\n\nconst socket = io();\nconst out = $('#console')[0];\nconst bg = $('#background');\n\nif (!window.DeviceMotionEvent) {\n  alert('Device motion is not supported! You can\\'t have any fun, sorry.');\n}\n\nif (localStorage.gameName) {\n  $('gameId').val(localStorage.gameName);\n}\n\n$('#newGame').click(newGame);\n$('#joinGame').click(joinGame);\n$('#startGame').click(startGame);\n$('#lose').click(lose);\n\nfunction send (url, data) {\n  const params = data ? data : {};\n  params.playerId = socket.id;\n  return $.ajax(url, {\n    method: 'POST',\n    data: params\n  });\n}\n\nfunction newGame () {\n  const url = '/room/new';\n  send(url)\n    .done(data => {\n      $('.starting-info').hide();\n      $('#console').text(`Your game name is: ${data.roomId}`)\n      localStorage.gameName = data.roomId;\n      $('#startGame').show();\n    })\n}\n\nfunction joinGame () {\n  const url = '/room/' + $('#gameId').val();\n  send(url)\n    .done(data => {\n      if (data.error) {\n        alert(room.error)\n      } else {\n        $('.starting-info').hide();\n        $('#console').text(`Your game name is: ${data.roomId}`)\n        localStorage.gameName = data.roomId;\n        $('#startGame').show();\n      }\n    })\n  $('gameId').val();\n}\n\nfunction startGame () {\n\n  // const name = $('#name').val();\n\n  // if (!name) return alert('You must tell me who you are!');\n\n  window.addEventListener('devicemotion', listener, false);\n\n  bg.addClass('alive').show();\n\n  socket.on('gameover', data => {\n    window.removeEventListener('devicemotion', listener, false)\n    alert('game over!', JSON.stringify(data));\n  })\n}\n\n\nfunction listener(ev) {\n  if (!ev.acceleration) return;\n  const acc = ev.acceleration;\n  jogHandler(acc.x, acc.y, acc.z);\n}\n\nfunction jogHandler(x, y, z) {\n  const arr = [x, y, z]\n  if (arr.filter(overTheLimit).length > 0) {\n    lose(listener);\n  }\n}\n\nfunction overTheLimit(coord) {\n  if (coord > LIMIT) {\n      return true;\n  }\n  return false;\n}\n\nfunction lose() {\n  window.removeEventListener('devicemotion', listener, false);\n  bg.removeClass('alive').addClass('loser').text('LOSER');\n  socket.emit('loser', {\n    id: socket.id\n  })\n  window.navigator.vibrate(500);\n}"]}