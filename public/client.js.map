{"version":3,"sources":["../client/client.js"],"names":[],"mappings":"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","file":"client.js","sourcesContent":["const LIMIT = 5;\n\nconst socket = io();\nconst out = $('#console')[0];\nconst indicator = $('#indicator');\n\nif (!window.DeviceMotionEvent) {\n  alert('Device motion is not supported! You can\\'t have any fun, sorry.');\n}\n\nif (localStorage.name) {\n  $('#name').val(localStorage.name);\n}\n\n$('#newGame').click(newGame);\n$('#joinGame').click(joinGame);\n$('#startGame').click(startGame);\n$('#lose').click(lose);\n$('.playAgain').click(playAgain);\n\nfunction send (url, data) {\n  const params = data ? data : {};\n\n  const name = $('#name').val();\n  localStorage.name = name;\n\n  params.name = name;\n  params.playerId = socket.id;\n\n  return $.ajax(url, {\n    method: 'POST',\n    data: params\n  });\n}\n\nfunction newGame () {\n  const url = '/room/new';\n  send(url)\n    .done(data => {\n      $('.starting-info').hide();\n      $('#gameName').text(`Your game name is: ${data.roomId}`)\n      localStorage.gameName = data.roomId;\n      $('.waiting').show();\n    })\n}\n\nfunction joinGame () {\n  const url = '/room/' + $('#gameId').val();\n  send(url)\n    .done(data => {\n      if (data.error) {\n        alert(room.error)\n      } else {\n        $('.starting-info').hide();\n        $('#console').text(`Your game name is: ${data.roomId}`)\n        localStorage.gameName = data.roomId;\n        $('.waiting').show();\n      }\n    })\n  $('gameId').val();\n}\n\nfunction playAgain () {\n  $('.starting-info').show();\n  $('#win-screen').hide();\n  $('#lose-screen').hide();\n  $('#gameName').text('');\n  $('.waiting').hide();\n}\n\nfunction startGame () {\n\n  // const name = $('#name').val();\n\n  // if (!name) return alert('You must tell me who you are!');\n\n  window.addEventListener('devicemotion', listener, false);\n\n  indicator.addClass('alive').show();\n\n  socket.on('gameover', data => {\n    window.removeEventListener('devicemotion', listener, false)\n    console.log(data)\n    console.log(socket.id)\n    var winner = data.winner;\n    var won = isWinner(data);\n    if (won) {\n      winner = 'YOU';\n      $('#win-screen').show();\n    } else {\n      $('#lose-screen').show();\n    }\n    indicator.removeClass('alive')\n      .removeClass('loser')\n      .text('')\n      .hide();\n  })\n}\n\nfunction isWinner(data) {\n  return data.winnerId === socket.id\n}\n\n\nfunction listener(ev) {\n  if (!ev.acceleration) return;\n  const acc = ev.acceleration;\n  jogHandler(acc.x, acc.y, acc.z);\n}\n\nfunction jogHandler(x, y, z) {\n  const arr = [x, y, z]\n  if (arr.filter(overTheLimit).length > 0) {\n    lose(listener);\n  }\n}\n\nfunction overTheLimit(coord) {\n  if (coord > LIMIT) {\n      return true;\n  }\n  return false;\n}\n\nfunction lose() {\n  window.removeEventListener('devicemotion', listener, false);\n  indicator.removeClass('alive').addClass('loser').text('LOSER');\n  socket.emit('loser', {\n    id: socket.id\n  })\n  window.navigator.vibrate(500);\n}"]}